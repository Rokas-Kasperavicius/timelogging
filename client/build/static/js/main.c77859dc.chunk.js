(this["webpackJsonptimelogging-client"]=this["webpackJsonptimelogging-client"]||[]).push([[0],{212:function(e,t,a){},214:function(e,t,a){},259:function(e,t,a){"use strict";a.r(t);var n=a(5),c=a(0),r=a.n(c),o=a(18),i=a.n(o),s=(a(212),a(23)),l=a(98),j=a(24),d=a.n(j),u=a(44),b=a(43),O=(a.p,a(214),a(115)),h=a(347),m=a(348),x=a(25),p=a(94),g=a(135),f=a.n(g),y=a(324),v=a(71),D=a(266),w=a(327),C=a(264),k=a(32),L=(a(38),a(7)),M=(a(2),a(322),a(323),a(346),a(168),a(261));Object(L.a)({alternativeLabel:{top:10,left:"calc(-50% + 16px)",right:"calc(50% + 16px)"},active:{"& $line":{borderColor:"#784af4"}},completed:{"& $line":{borderColor:"#784af4"}},line:{borderColor:"#eaeaf0",borderTopWidth:3,borderRadius:1}})(M.a),Object(v.a)({root:{color:"#eaeaf0",display:"flex",height:22,alignItems:"center"},active:{color:"#784af4"},circle:{width:8,height:8,borderRadius:"50%",backgroundColor:"currentColor"},completed:{color:"#784af4",zIndex:1,fontSize:18}});var T=a(137),S=a.n(T),B=a(180),F=a(330),I=a(337),z=a(338),H=a(172),A=a(169),E=a.n(A),N=a(22),q=a(343),R=function(e){var t=e.name,a=e.rules,c=e.onChange,r=Object(k.d)().control,o=new Date(1e3*Math.floor((new Date).getTime()/3e5)*60*5);return Object(n.jsx)(k.a,{name:t,control:r,rules:a,render:function(e){var t=e.value,a=e.onChange;return Object(n.jsx)(N.a,{utils:p.a,children:Object(n.jsx)(q.a,{value:t,onChange:function(e){a(e),c&&c()},minutesStep:5,autoOk:!0,okLabel:"",format:"y LLL d, HH:mm",ampm:!1,initialFocusedDate:o,disableFuture:!0,showTodayButton:!0})})}})},V=a(329),P=function(e){var t=e.name,a=e.rules,c=e.views,r=e.style,o=Object(k.d)().control;return Object(n.jsx)(k.a,{name:t,control:o,rules:a,render:function(e){var t=e.value,a=e.onChange;return Object(n.jsx)(N.a,{utils:p.a,children:Object(n.jsx)(V.a,{style:r,value:t,views:c,autoOk:!0,okLabel:"",onChange:a,format:"y LLLL",showTodayButton:!0})})}})},W=a(341),Y=function(e){var t=e.name,a=e.rules,r=e.options,o=void 0===r?[]:r,i=Object(k.d)().control,l=Object(c.useState)([]),j=Object(b.a)(l,2),d=j[0],u=j[1];Object(c.useEffect)((function(){u(o.map((function(e){return{key:e,text:e,value:e}})))}),[o]);var O=function(e,t){var a=t.value;u([{text:a,key:a,value:a}].concat(Object(s.a)(d)))};return Object(n.jsx)(k.a,{name:t,control:i,rules:a,render:function(e){var t=e.value,a=e.onChange;return Object(n.jsx)(W.a,{options:d,placeholder:"Choose Task ID",search:!0,selection:!0,fluid:!0,allowAdditions:!0,additionLabel:"New task ",value:t,onAddItem:O,onChange:function(e,t){var n=t.value;return a(n)}})}})},J=a(342),Q=function(e){var t=e.name,a=e.rules,c=e.multiline,r=void 0!==c&&c,o=Object(k.d)().register;return Object(n.jsx)(J.a,{inputRef:o(a),name:t,label:"Multiline",multiline:r,rows:4,variant:"outlined"})},U=a(344),$=function(e){var t=e.name,a=e.rules,c=Object(k.d)().control;return Object(n.jsx)(k.a,{name:t,control:c,rules:a,render:function(e){var t=e.value,a=e.onChange;return Object(n.jsx)(U.a,{checked:t,color:"primary",onChange:function(e){return a(e.target.checked)}})}})},G=a(75),K=a(263),X=a(177),Z=a.n(X),_=a(176),ee=a.n(_),te=a(173),ae=a.n(te),ne=a(174),ce=a.n(ne),re=a(332),oe=a(336),ie=a(335),se=a(333),le=a(334),je=a(331),de=a(349),ue=a(328),be=a(339),Oe=Object(v.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid ".concat(e.palette.primary.main),padding:e.spacing(2,4,3),outline:0,borderRadius:"4px",color:e.palette.text.primary},tooltip:{fontSize:"13px"}}})),he=function(){var e=Oe(),t=Object(O.b)(),a=Object(c.useState)(0),o=Object(b.a)(a,2),i=(o[0],o[1],Object(x.g)()),j=E.a.parse(Object(x.h)().search),p=j.year,g=void 0===p?(new Date).getFullYear():p,v=j.month,L=void 0===v?Object(B.a)(new Date,"MMMM"):v,M=Object(c.useState)(null),T=Object(b.a)(M,2),A=(T[0],T[1],Object(h.a)(["test",g,L],null));Object(c.useEffect)((function(){console.log("Fetch stuff")}),[g,L]);var N=r.a.useState(!1),q=Object(b.a)(N,2),V=q[0],W=q[1],J=Object(k.c)({defaultValues:{startDate:null,endDate:null,logDate:null,task:null,isLogged:!1}}),U=Object(h.a)("tasks",Object(u.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S()("/api/tasks");case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))),X=U.data,_=U.refetch,te=(J.register,J.handleSubmit),ne=J.watch,he=(J.errors,J.control,J.reset,J.getValues),me=(J.formState,J.setValue),xe=Object(m.a)((function(e){return S()({method:"post",url:"/api/calendar",data:e})}),{onSuccess:function(e,a){var n=a.year,c=a.month;t.setQueryData(["calendar",n,c],Object(G.groupBy)(Object(G.sortBy)(e.data,"startDate"),(function(e){return Object(B.a)(new Date(e.startDate),"yyyy MMMM dd")}))),_(),i.push("/calendar?year=".concat(n,"&month=").concat(c))}}),pe=function(){var e=he("startDate"),t=he("endDate");if(e&&t){var a=e.getFullYear(),n=e.getMonth();e.getDate()>=20&&n++,console.log(new Date(a,n)),me("logDate",new Date(a,n)),console.log(he("logDate"))}},ge=Object(H.a)({root:document.getElementById("test"),rootMargin:"0px 0px 300px 0px",initialInView:!1}),fe=ge.ref,ye=ge.inView,ve=A.fetchNextPage;Object(c.useEffect)((function(){console.log("MOUNTED")}),[]),Object(c.useEffect)((function(){}),[ye,ve]);var De=function(e){console.log(ve);var t=Object(F.a)(new Date("".concat(g," ").concat(L)),{months:e});i.push("/calendar?year=".concat(t.getFullYear(),"&month=").concat(Object(B.a)(t,"MMMM")))},we=ne("logDate"),Ce=void 0;return console.log("render"),A&&A.data&&A.data.pages&&(Ce=Object(G.groupBy)(G.concat.apply(void 0,Object(s.a)(A.data.pages)),(function(e){return Object(B.a)(new Date(e.startDate),"yyyy MMMM dd")}))),Object(n.jsxs)("div",{className:"App",children:[Object(n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(n.jsx)(y.a,{variant:"contained",color:"primary",startIcon:Object(n.jsx)(f.a,{}),onClick:function(){W(!0)},children:"log time"}),Object(n.jsxs)("div",{style:{color:"white",display:"flex",alignItems:"center"},children:[Object(n.jsx)(y.a,{variant:"outlined",color:"primary",onClick:function(){return De(-1)},children:Object(n.jsx)(ae.a,{})}),Object(n.jsxs)("span",{children:["\xa0\xa0",g]}),Object(n.jsxs)("span",{style:{width:"71px",textAlign:"center"},children:[Object(G.upperFirst)(L.toLowerCase()),"\xa0"]}),Object(n.jsx)(y.a,{variant:"outlined",color:"primary",onClick:function(){return De(1)},children:Object(n.jsx)(ce.a,{})})]})]}),Object(n.jsx)("div",{style:{marginTop:"20px"},children:Object(n.jsxs)(je.a,{id:"test",style:{maxHeight:"90vh"},children:[Object(n.jsxs)(re.a,{stickyHeader:!0,size:"small",children:[Object(n.jsx)(se.a,{children:Object(n.jsxs)(le.a,{children:[Object(n.jsx)(ie.a,{style:{borderBottomColor:"#303030"},size:"medium",children:"Task"}),Object(n.jsx)(ie.a,{style:{borderBottomColor:"#303030"},size:"medium",children:"Time spent"}),Object(n.jsx)(ie.a,{style:{borderBottomColor:"#303030"},size:"medium",children:"Time range"}),Object(n.jsx)(ie.a,{style:{borderBottomColor:"#303030",maxWidth:"100px"},size:"medium",children:"Task description"}),Object(n.jsx)(ie.a,{style:{borderBottomColor:"#303030"},size:"medium",children:"Task status"}),Object(n.jsx)(ie.a,{style:{borderBottomColor:"#303030"},colSpan:2,size:"medium",align:"center",children:"Actions"})]})}),Object(n.jsx)(n.Fragment,{children:!A.isLoading&&A.isSuccess&&Object(G.map)(Ce,(function(t,a){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(se.a,{children:Object(n.jsx)(le.a,{children:Object(n.jsx)(ie.a,{colSpan:7,style:{top:"54px"},size:"medium",children:a})})}),Object(n.jsx)(oe.a,{children:t.map((function(t,a){return Object(n.jsxs)(le.a,{children:[Object(n.jsx)(ie.a,{children:t.task}),Object(n.jsxs)(ie.a,{children:[Object(I.a)(new Date(t.endDate),new Date(t.startDate)),"h ",Object(z.a)(new Date(t.endDate),new Date(t.startDate))-60*Object(I.a)(new Date(t.endDate),new Date(t.startDate)),"m"]}),Object(n.jsxs)(ie.a,{children:["(".concat(Object(B.a)(new Date(t.startDate),"HH.mm"))," \u2013 ",Object(B.a)(new Date(t.endDate),"HH.mm"),")"]}),Object(n.jsx)(ie.a,{style:{maxWidth:"100px"},children:t.description}),Object(n.jsx)(ie.a,{children:t.isLogged?"Logged":"Not logged"}),Object(n.jsx)(ie.a,{style:{width:"10px"},children:Object(n.jsx)(de.a,{classes:{tooltip:e.tooltip},title:"Edit",placement:"top",TransitionComponent:be.a,arrow:!0,children:Object(n.jsx)(K.a,{color:"primary",children:Object(n.jsx)(ee.a,{})})})}),Object(n.jsx)(ie.a,{style:{width:"10px"},children:Object(n.jsx)(de.a,{classes:{tooltip:e.tooltip},title:"Delete",placement:"top",TransitionComponent:be.a,arrow:!0,children:Object(n.jsx)(K.a,{color:"secondary",children:Object(n.jsx)(Z.a,{})})})})]})}))})]})}))})]}),Object(n.jsx)("div",{ref:fe,style:{display:"flex",justifyContent:"center",alignItems:"center",height:"80px"},children:!A.isLoading&&A.isSuccess&&A.hasNextPage&&Object(n.jsx)(ue.a,{})})]})}),Object(n.jsx)(D.a,{open:V,className:e.modal,onClose:function(){W(!1)},closeAfterTransition:!0,BackdropComponent:w.a,children:Object(n.jsx)(C.a,{in:V,children:Object(n.jsx)("div",{className:e.paper,children:Object(n.jsx)(k.b,Object(l.a)(Object(l.a)({},J),{},{children:Object(n.jsxs)("form",{onSubmit:te((function(e){xe.mutate(Object(l.a)(Object(l.a)({},e),{},{year:Object(B.a)(e.logDate,"y"),month:Object(B.a)(e.logDate,"LLLL"),createdAt:new Date}))})),children:[Object(n.jsx)(R,{name:"startDate",onChange:pe,rules:{required:!0,validate:function(e){return e<he("endDate")}}}),Object(n.jsx)(R,{name:"endDate",onChange:pe,rules:{required:!0,validate:function(e){return e>he("startDate")}}}),Object(n.jsx)(P,{style:{display:we?"unset":"none"},name:"logDate",views:["year","month"],rules:{required:!0}}),Object(n.jsx)(Y,{name:"task",options:X,rules:{required:!0}}),Object(n.jsx)(Q,{name:"description",multiline:!0,rules:{required:!0}}),Object(n.jsx)($,{name:"isLogged"}),Object(n.jsx)(y.a,{type:"submit",variant:"contained",color:"primary",children:"Submit"})]})}))})})})]})},me=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,351)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;a(e),n(e),c(e),r(e),o(e)}))},xe=a(345),pe=a(178),ge=a(136),fe=a.n(ge),ye=a(179),ve=a(340),De=a(90),we=(a(258),new xe.a);we.setDefaultOptions({queries:{staleTime:6e5,cacheTime:1/0}});var Ce=Object(ye.a)({palette:{type:"dark",primary:{main:fe.a.A200}}});i.a.render(Object(n.jsxs)(O.a,{client:we,children:[Object(n.jsx)(ve.a,{theme:Ce,children:Object(n.jsx)(De.a,{children:Object(n.jsxs)("div",{children:[Object(n.jsx)("nav",{children:Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:Object(n.jsx)(De.b,{to:"/?year=2021&month=February",children:"February"})}),Object(n.jsx)("li",{children:Object(n.jsx)(De.b,{to:"calendar",children:"March"})}),Object(n.jsx)("li",{children:Object(n.jsx)(De.b,{to:"/users",children:"Users"})})]})}),Object(n.jsxs)(x.d,{children:[Object(n.jsx)(x.b,{path:"/calendar",children:Object(n.jsx)(he,{})}),Object(n.jsx)(x.b,{path:"/users",children:Object(n.jsx)("div",{children:"HI"})}),Object(n.jsx)(x.a,{to:{pathname:"/calendar"}})]})]})})}),Object(n.jsx)(pe.ReactQueryDevtools,{initialIsOpen:!1})]}),document.getElementById("root")),me()}},[[259,1,2]]]);
//# sourceMappingURL=main.c77859dc.chunk.js.map